<!doctype html> <html lang="en" class="esl-scrollable-content"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>ESL Media Query</title> <script>!function(){let e="";window.Promise&&window.CustomEvent?"getRootNode"in Element.prototype&&window.customElements&&window.IntersectionObserver&&window.ResizeObserver||(e="light"):e="full",e&&document.write('<script type="text/javascript" src="/esl/bundles/polyfill-'+e+'.js"><\/script>')}()</script> <link rel="icon" type="image/png" href="/esl/assets/logo-64x64.png"/> <link rel="stylesheet" type="text/css" href="/esl/bundles/localdev.css"/> </head> <body> <header class="header"> <nav class="navbar navbar-expand-lg navbar-dark bg-dark esl-demo-header"> <div class="container flex-column flex-lg-row align-items-stretch align-items-md-center"> <a class="navbar-brand logo-light logo-animated mr-5" href="/esl/"> <?xml version="1.0" encoding="utf-8"?> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"> <g class="shield"> <path class="s-l" fill="#C6361A" fill-rule="evenodd" d="M200 292c-.3 0-.6 0-.9-.1-.7-.2-73.1-17-73.1-96.9v-56.3c0-1.8 1.1-3.5 2.8-4.1l69.6-26.3c1-.4 2.1-.4 3.1 0l69.6 26.3c1.7.6 2.8 2.3 2.8 4.1V195c0 79.9-72.3 96.8-73.1 96.9-.2.1-.5.1-.8.1z"/> <path class="s-r" fill="#FF5D24" fill-rule="evenodd" clip-rule="evenodd" d="M200 108v184c.3 0 .6 0 .9-.1.7-.2 73.1-17 73.1-96.9v-56.3c0-1.8-1.1-3.5-2.8-4.1l-69.6-26.3c-.6-.2-1.1-.3-1.6-.3z"/> </g> <g class="wrenches"> <path class="w-l" fill-rule="evenodd" d="M207.7 207.3l-15.8 15.8-23.2-6.2-6.2-23.2 15.8-15.8c-9-.7-18.2 2.4-25.1 9.3-9.5 9.5-11.8 23.5-6.8 35.1L108.6 260c-4.7 4.7-4.7 12.3 0 17s12.3 4.7 17 0l37.7-37.7c11.6 4.9 25.6 2.7 35.1-6.8 6.9-6.9 10-16.2 9.3-25.2z" clip-rule="evenodd"/> <path class="w-r" fill-rule="evenodd" d="M292 122.6c-4.7-4.7-12.3-4.7-17 0l-37.7 37.7c-11.6-4.9-25.6-2.7-35.1 6.8-6.9 6.9-10 16.1-9.3 25.1l15.8-15.8 23.2 6.2 6.2 23.2-15.8 15.8c9 .7 18.2-2.4 25.1-9.3 9.5-9.5 11.8-23.5 6.8-35.1l37.7-37.7c4.8-4.6 4.8-12.2.1-16.9z" clip-rule="evenodd"/> </g> <path d="M199.5 39.5c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 308c-81.7 0-148-66.3-148-148s66.3-148 148-148 148 66.3 148 148-66.3 148-148 148z"/> </svg> <span class="ml-2">Exadel Smart Library</span> </a> <ul class="navbar-nav flex-grow-1 flex-column flex-md-row justify-content-end"> <li class="nav-item hd-dropdown"> <esl-trigger class="hd-dropdown-trigger" target="::next" track-hover="@+SM" hover-hide-delay="400"> <button class="btn btn-link hd-dropdown-btn hd-dropdown-arrow"> Examples </button> </esl-trigger> <esl-panel class="hd-dropdown-content" group="esl-nav" body-class="menu-opened" fallback-duration="400" close-on-esc close-on-outside-action> <ul class="hd-dropdown-list"> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/accordion/">Accordion</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/embedded-audio/">Embedded Audio</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/embedded-video/">Embedded Video</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/image/">Image</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/menu/">Menu</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/notification/">Notification</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/scrollbar/">Scrollbar</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/forms-select/">Select Dropdown</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/forms-select-list/">Select List</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/tabs/">Tabs</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/examples/toggleable/">Toggleable</a> </li> </ul> </esl-panel> </li> <li class="nav-item hd-dropdown"> <esl-trigger class="hd-dropdown-trigger" target="::next" track-hover="@+SM" hover-hide-delay="400"> <button class="btn btn-link hd-dropdown-btn hd-dropdown-arrow"> Components </button> </esl-trigger> <esl-panel class="hd-dropdown-content" group="esl-nav" body-class="menu-opened" fallback-duration="400" close-on-esc close-on-outside-action> <ul class="hd-dropdown-list"> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-alert/">ESL Alert</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-image/">ESL Image</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-media/">ESL Media</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-panel/">ESL Panel</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-popup/">ESL Popup</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-scrollbar/">ESL Scrollbar</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-select/">ESL Select</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-select-list/">ESL Select List</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-tabs/">ESL Tabs</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-toggleable/">ESL Toggleable</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/components/esl-trigger/">ESL Trigger</a> </li> </ul> </esl-panel> </li> <li class="nav-item hd-dropdown"> <esl-trigger class="hd-dropdown-trigger" target="::next" track-hover="@+SM" hover-hide-delay="400"> <button class="btn btn-link hd-dropdown-btn hd-dropdown-arrow nav-item-selected"> Utils </button> </esl-trigger> <esl-panel class="hd-dropdown-content" group="esl-nav" body-class="menu-opened" fallback-duration="400" close-on-esc close-on-outside-action> <ul class="hd-dropdown-list"> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/utils/esl-a11ty-group/">ESL A11y Group</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/utils/esl-base/">ESL Base Element</a> </li> <li class="nav-item hd-dropdown-item nav-item-selected" aria-current="page"> <a class="hd-dropdown-link" href="/esl/utils/esl-media-query/">ESL Media Query</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/utils/esl-traversing-query/">ESL Traversing Query</a> </li> <li class="nav-item hd-dropdown-item"> <a class="hd-dropdown-link" href="/esl/utils/esl-utils/">ESL Utils</a> </li> </ul> </esl-panel> </li> <li class="nav-item ml-1"> <a class="btn btn-link" href="https://github.com/exadel-inc/esl"> <svg width="30" height="30" viewBox="0 0 32 32" fill="#fff"> <path clip-rule="evenodd" fill-rule="evenodd" d="M16.003 0C7.17 0 .008 7.162.008 15.997c0 7.067 4.582 13.063 10.94 15.18.8.145 1.052-.33 1.052-.753 0-.38.008-1.442 0-2.777-4.45.967-5.37-2.107-5.37-2.107-.728-1.848-1.776-2.34-1.776-2.34-1.452-.992.11-.973.11-.973 1.604.113 2.45 1.65 2.45 1.65 1.427 2.442 3.743 1.736 4.654 1.328.146-1.034.56-1.74 1.017-2.14C9.533 22.663 5.8 21.29 5.8 15.16c0-1.747.622-3.174 1.645-4.292-.165-.404-.715-2.03.157-4.234 0 0 1.343-.43 4.398 1.64 1.276-.354 2.645-.53 4.005-.537 1.36.006 2.727.183 4.005.538 3.055-2.07 4.396-1.64 4.396-1.64.872 2.202.323 3.83.16 4.233 1.022 1.118 1.643 2.545 1.643 4.292 0 6.146-3.74 7.498-7.305 7.893C19.48 23.548 20 24.508 20 26v4.428c0 .428.258.9 1.07.746C27.422 29.054 32 23.062 32 15.997 32 7.162 24.838 0 16.003 0z"/> </svg> </a> </li> </ul> </div> </nav> <div class="esl-demo-header-overlay"></div> </header> <main role="main"> <div class="content container"> <h1 class="text-center pt-2"> ESL Media Query </h1> <hr/> <div class="markdown-container"> <p>ESL Media Query is an extended browser MediaQueryList object and related utils. In addition to native Media Features, ESL Media Query allows special <em>shortcuts</em> to simplify syntax and query usage. ESLMediaQuery is more tolerant to logical operations and allows using of multiple 'not' operators or having extra conditions inside the query (<code>all and all</code> still a valid condition).</p> <p><a name="features"></a></p> <h3>Supported ESL Media Query features</h3> <ul> <li>Native <a href="https://www.w3.org/TR/css3-mediaqueries/#media1">Media Query Features</a><br> (e.g. <code>(min-wigth: 300px)</code>, <code>(orientation: landscape)</code>, <code>(min-wigth: 300px) and (orientation: landscape)</code>).</li> <li>Shortcuts for DPR (Device Pixel Ratio) detection<br> Syntax <code>@x&lt;dpr_value&gt;</code> (e.g. <code>@x1</code>, <code>@x2</code>, <code>@x1.5</code>).</li> <li>Can block queries with DPR value greater than 1 for PageSpeedBots.</li> <li>Screen breakpoints shortcuts (e.g. <code>@XS</code>, <code>@md</code>, <code>@+LG</code>, <code>@-MD</code>)<br> Supports breakpoints declared in <a href="#breakpoints">ESLScreenBreakpoints</a> registry.<br> Accepts modifiers like <code>+</code> for upper breakpoints and <code>-</code> for lower breakpoints.</li> <li>Device and browser detection shortcuts that are registered through <a href="#shortcuts">ESLEnvShortcuts</a> registry. The list of predefined environment shortcuts is the following: <ul> <li><code>@BOT</code> - detects search/pagespeed bots</li> <li><code>@MOBILE</code> - detects mobile devices</li> <li><code>@DESKTOP</code> - detects desktops</li> <li><code>@ANDROID</code> - detects Android devices</li> <li><code>@IOS</code> - detects iOS devices</li> <li><code>@TOUCH</code> - cross-browser touch support detection</li> <li><code>@IE</code> - detects InternetExplorer 11</li> <li><code>@EDGE</code> - detects legacy Edge browser (&lt;18) based on EdgeHTML engine</li> <li><code>@GECKO</code> - detects Gecko engine based browsers (e.g. Firefox)</li> <li><code>@BLINK</code> - detects Blink engine based browsers (e.g. Google Chrome, Opera)</li> <li><code>@SAFARI</code> - detects safari browsers</li> <li><code>@SAFARI-IOS</code> - detects mobile safari browsers</li> </ul> </li> <li><code>or</code> operation alias in addition to <code>,</code> (<code>@xs or @mobile</code> is the same as <code>@xs, @mobile</code>)</li> <li>Multiple <code>not</code> operators, that is not sensitive to position (e.g. <code>not @ie</code>, <code>not @xs and not @mobile</code>)</li> </ul> <hr> <p><a name="breakpoints"></a></p> <h3>ESLScreenBreakpoints</h3> <p>ESLScreenBreakpoints is a custom screen breakpoints registry. It allows defining a named screen width range.</p> <p>Use <code>ESLScreenBreakpoints.add</code> static method to change default or define your own Screen Breakpoint.</p> <p>You can also use <code>ESLScreenBreakpoints.remove</code> to exclude breakpoint shortcut from registry.</p> <p>You can get all available screen breakpoints through <code>ESLScreenBreakpoints.names</code> property or access full breakpoint definition through <code>ESLScreenBreakpoints.get</code>.</p> <hr> <p><a name="dpr"></a></p> <h3>ESLScreenDPR</h3> <p>Additional preprocessor to provide DPR shortcuts.</p> <p>Use <code>ESLScreenDPR.ignoreBotsDpr</code> marker to enable DPR ignoring for PageSpeed Bots.</p> <hr> <p><a name="shortcuts"></a></p> <h3>ESLEnvShortcuts</h3> <p>ESLEnvShortcuts is a simple registry for a static shortcuts to describe environment related conditions</p> <p>An additional shortcuts can be added to the registry through <code>ESLEnvShortcuts.add</code> method ESLEnvShortcuts allows adding boolean result that will be converted to <code>all</code> / <code>not all</code> query conditions or setup result as native MediaQuery string.</p> <p>Environment shortcuts can be removed with <code>ESLEnvShortcuts.remove</code> method.</p> <hr> <p><a name="media-query"></a></p> <h3>ESLMediaQuery</h3> <p>ESLMediaQuery is a central API to create an extended Media Query conditions.</p> <ul> <li> <p>Use <code>ESLMediaQuery.for('query')</code> to create ESLMediaQuery condition.<br> Note: method <code>ESLMediaQuery.for</code> is memoized so multiple calls with the same query will return the same query instance as the result, which also means you might not need store or optimize ESLMediaQuery.for calls from your side.</p> </li> <li> <p>Use <code>ESLMediaQuery.from('query')</code> to create new ESLMediaQuery condition instance. Not memoized in opposite to <code>ESLMediaQuery.for</code>;</p> </li> <li> <p>Use <code>ESLMediaQuery.use</code> to register custom query preprocessor. Note: <code>ESLScreenBreakpoints</code>, <code>ESLScreenDPR</code>, <code>ESLEnvShortcuts</code> are three preprocessors that are registered by default.</p> </li> </ul> <p>Note: ESLMediaQuery has no real instances and represents <code>IMediaQueryConditionInterface</code> interface. <code>IMediaQueryConditionInterface</code> is implemented by 4 types of inner conditions:</p> <ul> <li><code>MediaQueryConstCondition</code> with only two possible instances <code>ALL</code> and <code>NOT_ALL</code></li> <li><code>MediaQueryCondition</code> - simple wrapper around native MediaQueryList object</li> <li><code>MediaQueryConjunction</code> - <code>and</code> condition container</li> <li><code>MediaQueryDisjunction</code> - `or' condition container</li> </ul> <p>The <code>ESLMediaQuery</code>(<code>IMediaQueryConditionInterface</code>) instances provide the following set of properties and methods:</p> <ul> <li><code>matches</code> - boolean getter that returns if the current environment configuration is acceptable for current query condition</li> <li><code>addListener(cb)</code> - to subscribe on condition state changes</li> <li><code>removeListener(cb)</code> - to unsubscribe from condition state changes</li> <li><code>optimize</code> - inner method to rebuild condition tree, and provide static and logic expression optimization.</li> </ul> <hr> <p><a name="media-rule"></a></p> <h3>ESLMediaRule</h3> <p>Pair of ESLMediaQuery and payload value. ESLMediaRule is used as an item for <a href="#eslmediarulelist">ESLMediaRuleList</a>.<br> ESLMediaRule can be parsed from <code>&lt;ESL Media Query&gt; =&gt; &lt;value&gt;</code> syntax string, e.g. <code>@XS =&gt; 1</code> (<code>1</code> is a payload) or <code>@+LG and @DESKTOP =&gt; desktop</code> (<code>'desktop'</code> is a payload).</p> <hr> <p><a name="media-rule-list"></a></p> <h3>ESLMediaRuleList</h3> <p>ESLMediaRuleList is a <a href="#eslmediarule">ESLMediaRule</a> collection. ESLMediaRuleList has methods to work with the whole rules list. It implements an observable interface, so you can observe active value changes.</p> <p>ESLMediaRuleList can be parsed from <code>&lt;default_value&gt; | &lt;ESL Media Rule&gt; | &lt;ESL Media Rule&gt;</code> string.</p> <p>ESLMediaRuleList should be generalized with the result value type and according payload parser.</p> <ul> <li><code>ESLMediaRuleList.STRING_PARSER</code> - out of the box string payload parser.</li> <li><code>ESLMediaRuleList.OBJECT_PARSER</code> - out of the box object payload parser (uses evaluation).</li> </ul> <p>Examples:</p> <ul> <li> <p><code> 1 | @XS =&gt; 2</code> - the RuleList result depends on environment and equals '1' on all screen breakpoints except XS, on XS it changes to '2'.</p> </li> <li> <p><code> @XS =&gt; {option: 1} | @+SM =&gt; {option: 2}</code> - the RuleList result depends on environment and equals <code>{option: 1}</code> on XS breakpoint, and equals <code>{option: 2}</code> on SM and upper breakpoints.</p> </li> </ul> </div> </div> </main> <footer class="footer bg-dark"> <div class="container"> <div class="text-center"> <div class="text-muted">ESL v3.4.1 © 2021 Exadel, Inc</div> <div class="text-muted">Core Team Contributors: <a href="mailto:astsefanovich@exadel.com">Alexey Stsefanovich</a>, <a href="mailto:ymurashka@exadel.com">Julia Murashko</a>, <a href="mailto:yadamska@exadel.com">Yuliya Adamskaya</a>, <a href="mailto:dshovchko@exadel.com">Dmytro Shovchko</a>, <a href="mailto:abarmina@exadel.com">Anna Barmina</a> </div> </div> </div> </footer> <script src="/esl/bundles/localdev.js"></script> <esl-scrollbar class="page-scrollbar" target="html"></esl-scrollbar> </body> </html> 